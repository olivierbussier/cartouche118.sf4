{% extends 'base.html.twig' %}

{% block title %}Index des clients{% endblock %}

{% block header %}{% endblock %}

{% block main_page %}

    {% import 'macros/bouton.html.twig' as control %}
    {% import "macros/textAjax.html.twig" as ajax %}

    <div class="alert alert-info" role="alert">

       <h4>Full : [{{ client.fullName }}] - Nom : [{{ client.nom }}] - Prénom : [{{ client.prenom }}]</h4>

    </div>

    <div class="row">

        <div class="col">
            {% for adresse in client.adresses %}
                <div class="card">
                    <h5 class="card-header">
                        <svg class="bi bi-house" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 00.5.5h9a.5.5 0 00.5-.5V7h1v6.5a1.5 1.5 0 01-1.5 1.5h-9A1.5 1.5 0 012 13.5zm11-11V6l-2-2V2.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5z" clip-rule="evenodd"/>
                            <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 011.414 0l6.647 6.646a.5.5 0 01-.708.708L8 2.207 1.354 8.854a.5.5 0 11-.708-.708L7.293 1.5z" clip-rule="evenodd"/>
                        </svg>
                        {{ adresse.nom }}</h5>
                    <div class="card-body">
                        <p class="card-text">{{ adresse.adresse1 }}</p>
                        <p class="card-text">{{ adresse.adresse2 }}</p>
                        <p class="card-text">{{ adresse.codePostal }} {{ adresse.ville }}</p>
                        <p class="card-text">{{ adresse.pays }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="col">
            {% for telephone in client.telephones %}
                <div class="card">
                    <h5 class="card-header">
                        <svg class="bi bi-phone" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M11 1H5a1 1 0 00-1 1v12a1 1 0 001 1h6a1 1 0 001-1V2a1 1 0 00-1-1zM5 0a2 2 0 00-2 2v12a2 2 0 002 2h6a2 2 0 002-2V2a2 2 0 00-2-2H5z" clip-rule="evenodd"/>
                            <path fill-rule="evenodd" d="M8 14a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                        </svg>
                        {{ telephone.nom }}</h5>
                    <div class="card-body">
                        {% if telephone.label != '' %}
                            <p class="card-text">{{ telephone.label }}</p>
                        {% endif %}
                        <p class="card-text"><a href="tel:{{ telephone.telephone }}">{{ telephone.telephone }}</a></p>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="col">
            {% for email in client.emails %}
            <div class="card">
                <h5 class="card-header">
                    <svg class="bi bi-envelope" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2z" clip-rule="evenodd"/>
                        <path fill-rule="evenodd" d="M.071 4.243a.5.5 0 01.686-.172L8 8.417l7.243-4.346a.5.5 0 01.514.858L8 9.583.243 4.93a.5.5 0 01-.172-.686z" clip-rule="evenodd"/>
                        <path d="M6.752 8.932l.432-.252-.504-.864-.432.252.504.864zm-6 3.5l6-3.5-.504-.864-6 3.5.504.864zm8.496-3.5l-.432-.252.504-.864.432.252-.504.864zm6 3.5l-6-3.5.504-.864 6 3.5-.504.864z"/>
                    </svg>
                    {{ email.nom }}</h5>
                <div class="card-body">
                    <p class="card-text">{{ email.label }}</p>
                    <p class="card-text"><a href="mailto:{{ email.email }}">{{ email.email }}</a></p>
                </div>
            </div>
            {% endfor %}
        </div>

    </div>

    {% for note in client.notes %}
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{ note.createdAt | date('d/m/Y') }}</h5>
                <p class="card-text">{{ note.text | nl2br }}</p>
            </div>
        </div>
    {% endfor %}

    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-condensed table-hover table-striped">
                    <tr>
                        <th>Id</th>
                        <th>Date</th>
                        <th>Référence</th>
                        <th>Prix HT</th>
                        <th>Prix TTC</th>
                    </tr>
                    {% for facture in client.commandes %}
                        <tr>
                            <td>{{ facture.id }}</td>
                            <td>{{ facture.createdAt | date('d/m/Y') }}</td>
                            <td><a href="{{ path('view_commandes',{ref: facture.id}) }}">{{ facture.reference }}</a></td>
                            <td>{{ facture.prixHT | format_currency('EUR') }}</td>
                            <td>{{ facture.prixTTC | format_currency('EUR') }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    </div>

{% endblock %}
