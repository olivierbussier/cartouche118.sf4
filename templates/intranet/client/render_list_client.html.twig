{% import "macros/pagination.html.twig" as pages %}

{% if nbPages > 1 %}
    <nav aria-label="NavClients">
        {{ pages.pages(nbPages, currentPage, term) }}
    </nav>
{% endif %}

<style>
    .lw {
        color: #ffffff ;
    }
    .lw:hover {
        color: #aaaaaa ;
    }
</style>


    <div class="accordion" id="accordion_client">

        {% for client in clients %}

            <div class="card">

                <div class="card-title" id="heading_{{ client.id }}">
                    <button class="btn btn-xs btn-success"
                            style="width: 80%"
                            type="button"
                            data-toggle="collapse"
                            data-target="#collapse_{{ client.id }}"
                            aria-expanded="true"
                            aria-controls="collapse_{{ client.id }}">
                        &nbsp;{{ client.fullName }} <!-- - [{{ client.nom ~ ', ' ~ client.prenom }}]-->
                    </button>

                </div>

                <div id="collapse_{{ client.id }}" class="collapse" aria-labelledby="heading_{{ client.id }}" data-parent="#accordion_client">
                    <div class="card-body">
                        <!--h5 class="card-title">
                            <div class="alert alert-info">
                                <a href="{{ path('show_client', {id: client.id}) }}"
                                   target="_blank"
                                   class="" > - {{ client.fullName }} - {{ client.nom ~ ', ' ~ client.prenom }}</a>
                            </div>
                        </h5>
                    </div>-->

                        {% for note in client.notes %}


                            <h5 class="card-title">
                                {{ note.createdAt | date('d/m/Y') }}
                            </h5>
                            <p class="card-text">{{ note.text | nl2br }}</p>


                        {% endfor %}

                        <div class="client_fact">
                            <table class="table table-bordered">
                                <tr>
                                    <th>Date</th><th>Ref</th><th>Montant HT</th><th>Montant TTC</th>
                                </tr>
                                {% for facture in client.commandes %}
                                    <tr>
                                        <td>{{ facture.createdAt | date('d/m/Y') }}</td>
                                        <td><a href="{{ path('view_commandes',{ref: facture.id}) }}"
                                               target="_blank">{{ facture.reference }}</a></td>
                                        <td class="text-right">{{ facture.getPrixHT | number_format(2,'.',' ') }}â‚¬</td>
                                        <td class="text-right">{{ facture.getPrixTTC | number_format(2,'.',' ') }}</td>
                                    </tr>
                                {% endfor %}
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>


