{% macro script(ajaxUrl, term, pageNb) %}
    <script>
        $.ajax({
            type: "POST",
            url: '{{ ajaxUrl }}',
            data: {term: {{ term | raw}}, pageNb:{{ pageNb }} },
            success: function(data) {
                $('#render_list').html(data)
            },
            datatype: 'html',
            delay: 0
        });
    </script>
{% endmacro %}


{% macro text(label, fieldName, ajaxUrl, defval, pageNb) %}

    <script>
        {% set idCount = genID('') %}

        $(function () {
            $("#id_{{ idCount }}").autocomplete({
                source: function (request) {
                    $.ajax({
                        type: "POST",
                        url: '{{ ajaxUrl }}',
                        data: {term: request.term, pageNb:{{ pageNb }} },
                        success: function(data) {
                            $('#render_list').html(data)
                        },
                        datatype: 'html',
                        delay: 0
                    });
                },
                minLength: 0,
                select: function (event, ui) {
                    $("#id_{{ idCount }}").autocomplete('search', ui['item']['value'])
                }
            })
        })
    </script>
    <div class="ui-widget">
        {% if label != '' %}
            <label for="id_{{ idCount }}">{{ label }}</label>
        {% endif %}
        <input name="{{ fieldName }}" class="form-control" id="id_{{ idCount }}" value="{{ defval }}" placeholder="Texte Ã  rechercher">
    </div>

    {% set idCount = idCount + 1 %}

{% endmacro %}
